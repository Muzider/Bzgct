{% extends 'drawings/base.html' %}

{% block title %}删除标准工艺流程 - 标准工程图系统{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">删除标准工艺流程</h1>
    <div class="breadcrumb">基础设置 > 标准工艺流程管理 > 删除</div>
</div>

<div class="content-card">
    <div class="alert alert-danger">
        <h5 class="alert-heading">
            <i class="fas fa-exclamation-triangle"></i> 确认删除
        </h5>
        <p class="mb-0">您确定要删除以下标准工艺流程吗？此操作不可恢复。</p>
    </div>
    
    <!-- 工艺流程信息 -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="fas fa-info-circle"></i> 工艺流程信息
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label fw-bold">工艺流程名称</label>
                        <p class="form-control-plaintext">{{ process_flow.name }}</p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label fw-bold">船型</label>
                        <p class="form-control-plaintext">
                            <span style="display: inline-block; background-color: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                                {{ process_flow.ship_type.ship_type }}
                            </span>
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label fw-bold">典型分段</label>
                        <p class="form-control-plaintext">
                            <span style="display: inline-block; background-color: #e8f5e8; color: #2d5a2d; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                                {{ process_flow.typical_section.section_name }}
                            </span>
                        </p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label fw-bold">预估总工时</label>
                        <p class="form-control-plaintext">
                            <span style="color: #f39c12; font-weight: bold;">
                                {{ process_flow.estimated_total_hours|floatformat:1 }} 小时
                            </span>
                        </p>
                    </div>
                </div>
            </div>
            
            {% if process_flow.description %}
            <div class="row">
                <div class="col-12">
                    <div class="mb-3">
                        <label class="form-label fw-bold">工艺流程描述</label>
                        <p class="form-control-plaintext">{{ process_flow.description }}</p>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label fw-bold">创建时间</label>
                        <p class="form-control-plaintext">{{ process_flow.created_at|date:"Y-m-d H:i" }}</p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label fw-bold">最后更新</label>
                        <p class="form-control-plaintext">{{ process_flow.updated_at|date:"Y-m-d H:i" }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 删除确认表单 -->
    <form method="post">
        {% csrf_token %}
        
        <div class="alert alert-warning">
            <h6><i class="fas fa-info-circle"></i> 删除说明</h6>
            <ul class="mb-0">
                <li>删除后，该工艺流程将被标记为不可用</li>
                <li>相关的工艺流程步骤也会被删除</li>
                <li>此操作不会影响已经使用该工艺流程的项目</li>
                <li>如需恢复，请联系系统管理员</li>
            </ul>
        </div>
        
        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-danger btn-action" onclick="return confirm('确定要删除这个标准工艺流程吗？此操作不可恢复！')">
                <i class="fas fa-trash"></i>确认删除
            </button>
            <a href="{% url 'drawings:standard_process_flow_list' %}" class="btn btn-secondary btn-action">
                <i class="fas fa-arrow-left"></i>取消删除
            </a>
        </div>
    </form>
</div>
{% endblock %}

